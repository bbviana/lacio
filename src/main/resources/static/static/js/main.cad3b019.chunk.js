(window["webpackJsonplacio-client"]=window["webpackJsonplacio-client"]||[]).push([[0],{24:function(e,a,t){e.exports=t(54)},29:function(e,a,t){},53:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),o=t(22),c=t.n(o),r=(t(29),t(3)),s=t(4),l=t(6),u=t(5),d=t(7),f=t(8),m=t.n(f),p={dominios:function(e,a){return m.a.get("/api/dominios/".concat(e,"/").concat(a))},relacionadas:function(e,a,t){return m.a.get("/api/relacionadas/".concat(e,"/").concat(a,"/").concat(t))},significados:function(e,a){return m.a.get("/api/significados/".concat(e,"/").concat(a))}},v=t(2),h=function(e){return function(a){return!e.find((function(e){return e.id===a.id}))}},g=function(e,a){return[].concat(Object(v.a)(e),Object(v.a)(a.filter(h(e))))},b={receiveDominios:function(e,a){var t=a.palavra,n=a.page,i=a.data;if(0===i.length)return e;var o=e.elements,c=o.nodes,r=o.edges,s=o.clusters,l={id:"p_".concat(t),label:t,context:t,type:"palavra",page:n},u=i.map((function(e){return{id:"d_".concat(e),label:e,context:t,type:"dominio"}})).filter(h(c)),d=u.map((function(e){return{source:l.id,target:e.id,palavra:l.label,dominio:e.label}}));u.push(l);var f=[].concat(l.id,d.map((function(e){return e.target}))),m=!1,p=[],b=!0,y=!1,E=void 0;try{for(var k,N=s[Symbol.iterator]();!(b=(k=N.next()).done);b=!0){var C=k.value,O=-1!==C.indexOf(l.id);O||p.push(C),O&&1===n&&(p.push(f),m=!0,p.push(C.filter((function(e){return e!==l.id})))),O&&n>=2&&(p.push([].concat(Object(v.a)(C),Object(v.a)(f))),m=!0)}}catch(j){y=!0,E=j}finally{try{b||null==N.return||N.return()}finally{if(y)throw E}}return!m&&p.push(f),{palavraBusca:"",currentNode:t,elements:{nodes:g(u,c),edges:d.concat(r),clusters:p}}},receiveRelacionadas:function(e,a){var t=a.dominio,n=a.palavra,i=a.page,o=a.data;if(0===o.length)return e;var c=e.elements,r=c.nodes,s=c.edges,l=c.clusters,u={id:"d_".concat(t),label:t,context:t,type:"dominio",page:i},d=o.concat(n).map((function(e){return{id:"p_".concat(e),label:e,context:t,type:"palavra"}})).filter(h(r)),f=d.map((function(e){return{source:u.id,target:e.id,palavra:e.label,dominio:u.label}}));d.push(u);var m=[].concat(u.id,f.map((function(e){return e.target}))),p=!1,b=[],y=!0,E=!1,k=void 0;try{for(var N,C=l[Symbol.iterator]();!(y=(N=C.next()).done);y=!0){var O=N.value,j=-1!==O.indexOf(u.id);j||b.push(O),j&&1===i&&(b.push(m),p=!0,b.push(O.filter((function(e){return e!==u.id})))),j&&i>=2&&(b.push([].concat(Object(v.a)(O),Object(v.a)(m))),p=!0)}}catch(S){E=!0,k=S}finally{try{y||null==C.return||C.return()}finally{if(E)throw k}}return!p&&b.push(m),{currentNode:t,elements:{nodes:g(d,r),edges:f.concat(s),clusters:b}}},receiveSignificados:function(e,a){var t=a.palavra,n=a.dominio,i=a.data;return console.log(i,"receiveSignificados"),{significado:{palavra:t,dominio:n,definicoes:i}}}},y=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).ref=i.a.createRef(),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.ref.current.addEventListener("click",(function(e){return e.stopPropagation()}))}},{key:"render",value:function(){var e=this.props,a=e.palavra,t=e.dominio,n=e.definicoes;return i.a.createElement("div",{className:"Significados",ref:this.ref},i.a.createElement("div",{className:"title"},"Significados"),i.a.createElement("div",{className:"subtitle"},i.a.createElement("span",{className:"highlight"},a)," dentro do dom\xednio conceitual ",i.a.createElement("span",{className:"highlight"},t)),n.map((function(e,a){return i.a.createElement("div",{className:"definicao",key:a},i.a.createElement("span",{className:"index"},a+1,"."),e.dominios.length>0&&i.a.createElement("span",{className:"dominios"},e.dominios.join(", ")),i.a.createElement("span",{className:"texto"},e.texto),e.score>0&&i.a.createElement("span",{className:"score"},e.score))})))}}]),a}(n.Component),E=t(23),k=t.n(E),N=t(10),C=t.n(N);C.a.use(k.a);var O=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).graph=i.a.createRef(),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.onClickNode,t=e.onClickEdge;this.cy=C()({container:this.graph.current,elements:[],style:[{selector:"node",style:{"background-color":function(e){return"dominio"===e.data("type")?"#CCC":"green"},label:"data(label)"}},{selector:"edge",style:{width:3,"line-color":"#ccc"}}]}),this.cy.on("tap","node",(function(){a(this)})),this.cy.on("tap","edge",(function(e){console.log(e.renderedPosition),t(this)}))}},{key:"draw",value:function(e,a){var t=this;if(this.cy){var n=j(a);console.log(n.nodes,"nodes"),console.log(n.clusters,"clusters"),this.cy.remove("node"),this.cy.add(n),this.cy.layout({name:"cise",fit:!1,nodeRepulsion:5,clusters:n.clusters,ready:function(){t.cy.fit(t.cy.$("[context='".concat(e,"']")))}}).run()}}},{key:"shouldComponentUpdate",value:function(e,a,t){return this.props.elements!==e.elements}},{key:"render",value:function(){var e=this.props,a=e.context,t=e.elements;return this.draw(a,t),i.a.createElement("div",{className:"WordGraph",ref:this.graph})}}]),a}(n.Component),j=function(e){var a=e.nodes,t=e.edges,n=e.clusters;return{nodes:a.map((function(e){return{data:e}})),edges:t.map((function(e){return{data:e}})),clusters:n}},S=O,w=(t(53),function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(i)))).state={palavraBusca:"",currentNode:null,significado:{palavra:"",dominio:"",definicoes:[]},elements:{nodes:[],edges:[],clusters:[]}},t.onChangeBusca=function(e){t.setState({palavraBusca:e.target.value})},t.onSearch=function(e){e.stopPropagation(),e.preventDefault();var a=t.state.palavraBusca;t.fetchDominios(a,1)},t.onClickNode=function(e){var a=(e.data("page")||0)+1;"palavra"===e.data("type")?t.onClickPalavra(e,a):t.onClickDominio(e,a)},t.onClickPalavra=function(e,a){var n=e.data("label");t.fetchDominios(n,a)},t.onClickDominio=function(e,a){var n=e.data("label"),i=e.data("context");t.fetchRelacionadas(n,i,a)},t.onClickEdge=function(e){var a=e.data("dominio"),n=e.data("palavra");t.fetchSignificados(a,n)},t.fetchDominios=function(e,a){p.dominios(e,a).then((function(n){var i=n.data;return b.receiveDominios(t.state,{palavra:e,page:a,data:i})})).then((function(e){return t.setState(e)}))},t.fetchRelacionadas=function(e,a,n){p.relacionadas(e,a,n).then((function(i){var o=i.data;return b.receiveRelacionadas(t.state,{palavra:a,dominio:e,page:n,data:o})})).then((function(e){return t.setState(e)}))},t.fetchSignificados=function(e,a){p.significados(e,a).then((function(n){var i=n.data;return b.receiveSignificados(t.state,{palavra:a,dominio:e,data:i})})).then((function(e){return t.setState(e)}))},t.clearSignificado=function(){return t.setState({significado:{}})},t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",(function(){return e.clearSignificado()}))}},{key:"render",value:function(){var e=this.state,a=e.palavraBusca,t=e.currentNode,n=e.elements,o=e.significado;return i.a.createElement("div",{className:"App"},i.a.createElement(x,{buscaValue:a,onChangeBusca:this.onChangeBusca,onSearch:this.onSearch}),i.a.createElement("div",{className:"content"},o.palavra&&i.a.createElement(y,{palavra:o.palavra,dominio:o.dominio,definicoes:o.definicoes}),i.a.createElement(B,null),i.a.createElement(S,{context:t,elements:n,onClickNode:this.onClickNode,onClickEdge:this.onClickEdge})))}}]),a}(n.Component)),x=function(e){var a=e.buscaValue,t=e.onChangeBusca,n=e.onSearch;return i.a.createElement("div",{className:"Header"},i.a.createElement("span",{className:"title"},"L\xe1cio"),i.a.createElement("form",{onSubmit:n},i.a.createElement("input",{type:"text",value:a,placeholder:"Por ex: gato, terra, b\xf3son",autoFocus:!0,onChange:t}),i.a.createElement("input",{type:"submit",value:"Adicionar"})))},B=function(){return i.a.createElement("div",{className:"Subtitle"},i.a.createElement("div",{className:"palavra"},"palavra"),i.a.createElement("div",{className:"dominio"},"dom\xednio conceitual"))},D=w;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.cad3b019.chunk.js.map