(window["webpackJsonplacio-client"]=window["webpackJsonplacio-client"]||[]).push([[0],{24:function(e,t,n){e.exports=n(54)},29:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(22),i=n.n(o),r=(n(29),n(3)),s=n(4),l=n(6),u=n(5),d=n(7),f=n(8),p=n.n(f),m={dominios:function(e,t){return p.a.get("/api/dominios/".concat(e,"/").concat(t))},relacionadas:function(e,t,n){return p.a.get("/api/relacionadas/".concat(e,"/").concat(t,"/").concat(n))},significados:function(e,t){return p.a.get("/api/significados/".concat(e,"/").concat(t))}},h=n(2),v=function(e){return function(t){return!e.find((function(e){return e.id===t.id}))}},g=function(e,t){return[].concat(Object(h.a)(e),Object(h.a)(t.filter(v(e))))},y={receiveDominios:function(e,t){var n=t.palavra,a=t.page,c=t.data;if(0===c.length)return e;var o=e.elements,i=o.nodes,r=o.edges,s=o.clusters,l={id:"p_".concat(n),label:n,context:n,type:"palavra",page:a},u=c.map((function(e){return{id:"d_".concat(e),label:e,context:n,type:"dominio"}})).filter(v(i)),d=u.map((function(e){return{source:l.id,target:e.id,palavra:l.label,dominio:e.label}}));u.push(l);var f=[].concat(l.id,d.map((function(e){return e.target}))),p=[],m=!0,y=!1,b=void 0;try{for(var k,E=s[Symbol.iterator]();!(m=(k=E.next()).done);m=!0){var C=k.value;-1!==C.indexOf(l.id)?1===a?(p.push(f),p.push(C.filter((function(e){return e!==l.id})))):p.push([].concat(Object(h.a)(C),Object(h.a)(f))):p.push(C)}}catch(O){y=!0,b=O}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}return 0===s.length&&p.push(f),{palavraBusca:"",currentNode:n,elements:{nodes:g(u,i),edges:d.concat(r),clusters:p}}},receiveRelacionadas:function(e,t){var n=t.dominio,a=t.palavra,c=t.page,o=t.data;if(0===o.length)return e;var i=e.elements,r=i.nodes,s=i.edges,l=i.clusters,u={id:"d_".concat(n),label:n,context:n,type:"dominio",page:c},d=o.concat(a).map((function(e){return{id:"p_".concat(e),label:e,context:n,type:"palavra"}})).filter(v(r)),f=d.map((function(e){return{source:u.id,target:e.id,palavra:e.label,dominio:u.label}}));d.push(u);var p=[].concat(u.id,f.map((function(e){return e.target}))),m=[],y=!0,b=!1,k=void 0;try{for(var E,C=l[Symbol.iterator]();!(y=(E=C.next()).done);y=!0){var O=E.value;-1!==O.indexOf(u.id)?1===c?(m.push(p),m.push(O.filter((function(e){return e!==u.id})))):m.push([].concat(Object(h.a)(O),Object(h.a)(p))):m.push(O)}}catch(j){b=!0,k=j}finally{try{y||null==C.return||C.return()}finally{if(b)throw k}}return 0===l.length&&m.push(p),{currentNode:n,elements:{nodes:g(d,r),edges:f.concat(s),clusters:m}}},receiveSignificados:function(e,t){var n=t.data;return console.log(n,"receiveSignificados"),{significados:n}}},b=n(23),k=n.n(b),E=n(10),C=n.n(E);C.a.use(k.a);var O=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).graph=c.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onClickNode,n=e.onClickEdge;this.cy=C()({container:this.graph.current,elements:[],style:[{selector:"node",style:{"background-color":function(e){return"dominio"===e.data("type")?"#CCC":"green"},label:"data(label)"}},{selector:"edge",style:{width:3,"line-color":"#ccc"}}]}),this.cy.on("tap","node",(function(){t(this)})),this.cy.on("tap","edge",(function(e){console.log(e.renderedPosition),n(this)}))}},{key:"draw",value:function(e,t){var n=this;if(this.cy){var a=j(t);console.log(a.nodes),this.cy.remove("node"),this.cy.add(a),this.cy.layout({name:"cise",fit:!1,nodeRepulsion:5,clusters:a.clusters,ready:function(){n.cy.fit(n.cy.$("[context='".concat(e,"']")))}}).run()}}},{key:"shouldComponentUpdate",value:function(e,t,n){return this.props.elements!==e.elements}},{key:"render",value:function(){var e=this.props,t=e.context,n=e.elements;return this.draw(t,n),c.a.createElement("div",{className:"WordGraph",ref:this.graph})}}]),t}(a.Component),j=function(e){var t=e.nodes,n=e.edges,a=e.clusters;return{nodes:t.map((function(e){return{data:e}})),edges:n.map((function(e){return{data:e}})),clusters:a}},S=O,N=(n(53),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={palavraBusca:"",currentNode:null,elements:{nodes:[],edges:[],clusters:[]},significados:[]},n.onChangeBusca=function(e){n.setState({palavraBusca:e.target.value})},n.onSearch=function(e){e.stopPropagation(),e.preventDefault();var t=n.state.palavraBusca;n.fetchDominios(t,1)},n.onClickNode=function(e){var t=(e.data("page")||0)+1;"palavra"===e.data("type")?n.onClickPalavra(e,t):n.onClickDominio(e,t)},n.onClickPalavra=function(e,t){var a=e.data("label");n.fetchDominios(a,t)},n.onClickDominio=function(e,t){var a=e.data("label"),c=e.data("context");n.fetchRelacionadas(a,c,t)},n.onClickEdge=function(e){var t=e.data("dominio"),a=e.data("palavra");n.fetchSignificados(t,a)},n.fetchDominios=function(e,t){m.dominios(e,t).then((function(a){var c=a.data;return y.receiveDominios(n.state,{palavra:e,page:t,data:c})})).then((function(e){return n.setState(e)}))},n.fetchRelacionadas=function(e,t,a){m.relacionadas(e,t,a).then((function(c){var o=c.data;return y.receiveRelacionadas(n.state,{palavra:t,dominio:e,page:a,data:o})})).then((function(e){return n.setState(e)}))},n.fetchSignificados=function(e,t){m.significados(e,t).then((function(e){var t=e.data;return y.receiveSignificados(n.state,{data:t})})).then((function(e){return n.setState(e)}))},n.clearSignificados=function(){return n.setState({significados:[]})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",(function(){return e.clearSignificados()}))}},{key:"render",value:function(){var e=this.state,t=e.palavraBusca,n=e.currentNode,a=e.elements,o=e.significados;return c.a.createElement("div",{className:"App"},c.a.createElement(w,{buscaValue:t,onChangeBusca:this.onChangeBusca,onSearch:this.onSearch}),c.a.createElement("div",{className:"content"},o.length>0&&c.a.createElement(x,{value:o}),c.a.createElement(S,{context:n,elements:a,onClickNode:this.onClickNode,onClickEdge:this.onClickEdge})))}}]),t}(a.Component)),w=function(e){var t=e.buscaValue,n=e.onChangeBusca,a=e.onSearch;return c.a.createElement("div",{className:"Header"},c.a.createElement("span",{className:"title"},"L\xe1cio"),c.a.createElement("form",{onSubmit:a},c.a.createElement("input",{type:"text",value:t,autoFocus:!0,onChange:n}),c.a.createElement("input",{type:"submit",value:"Buscar"})))},x=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).ref=c.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.ref.current.addEventListener("click",(function(e){return e.stopPropagation()}))}},{key:"render",value:function(){var e=this.props.value;return c.a.createElement("div",{className:"Significados",ref:this.ref},c.a.createElement("div",{className:"title"},"Significados"),e.map((function(e,t){return c.a.createElement("div",{className:"significado",key:t},c.a.createElement("span",{className:"index"},t+1,"."),e.dominios.length>0&&c.a.createElement("span",{className:"dominios"},e.dominios.join(", ")),c.a.createElement("span",{className:"texto"},e.texto),e.score>0&&c.a.createElement("span",{className:"score"},e.score))})))}}]),t}(a.Component),B=N;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.ed9a4e2a.chunk.js.map